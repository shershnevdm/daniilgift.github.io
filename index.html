<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>sdr</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
  :root{
    --frame:#2b2b2b;
    --gold:#a8701f;
    --metal:#cfcfcf;
    --text:#e9e9e9;
    --lidH: 80px;
    --bandH: 74px;
    --bodyH: 180px;
    --t:220ms cubic-bezier(.2,.8,.2,1);
  }

  html,body{
    height:100%; margin:0; color:var(--text);
    /* ПЛАВНЫЙ фон: мягкое золотое свечение снизу + тьма выше */
    background:
      radial-gradient(120% 60% at 50% 100%, rgba(194,147,29,.55) 0%, rgba(194,147,29,.32) 20%, rgba(37,33,24,.35) 42%, rgba(26,26,26,.9) 64%, #141414 100%),
      #141414;
    font-family:"Press Start 2P", cursive;
    overflow:hidden;
  }

  /* Particles */
  .custom-squares-layer{
    position:absolute; bottom:0; left:0; width:100%; height:220px; pointer-events:none; z-index:1;
  }
  .custom-squares-layer .square{
    position:absolute; background-color:#ffda6b; opacity:.7; width:3px; height:3px;
    box-shadow:0 0 6px #ffda6b; animation:float 5s ease-in-out infinite;
  }
  @keyframes float{ 0%{transform:translateY(0);opacity:.6} 50%{transform:translateY(-8px);opacity:1} 100%{transform:translateY(0);opacity:.6} }

  .uc-courses{ position:relative; z-index:2; min-height:100%; display:grid; place-items:center; padding:28px 12px; }

  /* Chest */
  .chest{ background:var(--frame); padding:8px; border:4px solid #000;
          box-shadow:0 0 0 2px #000 inset, 0 14px 0 #000; 
          width: calc(100% - 20px);
          max-width: 460px;}
  .box{ position:relative; border:4px solid #000; background:var(--gold); overflow:hidden; }

  /* ПИКСЕЛЬНЫЙ ШУМ (очень деликатный) */
  .box::after{
    content:"";
    position:absolute; inset:0; pointer-events:none; z-index:1; /* над деревом, под всем остальным */
    opacity:.08; mix-blend-mode:multiply;
    image-rendering:pixelated;
    background-image:url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64">\
<filter id="n">\
<feTurbulence type="fractalNoise" baseFrequency="0.85" numOctaves="1" stitchTiles="stitch"/>\
<feColorMatrix type="saturate" values="0"/>\
</filter>\
<rect width="100%" height="100%" filter="url(%23n)" fill="rgba(0,0,0,0.9)"/>\
</svg>');
    background-size:3px 3px; /* мелкий «пиксельный» шум */
    background-repeat:repeat;
  }

  .lid{
    position:relative; height:var(--lidH); background:var(--gold);
    border-bottom:4px solid #000; z-index:3; transition:transform var(--t);
  }

  /* Замок-кнопка */
  .lock-btn{
    position:absolute; left:50%; bottom:-10px; transform:translateX(-50%);
    display:grid; place-items:center;
    height:40px; padding:0 14px; min-width:112px;
    background:var(--metal); color:#000;
    border:4px solid #000; box-shadow:0 8px 0 #000;
    cursor:pointer; user-select:none; z-index:4;
    transition:width var(--t), min-width var(--t), padding var(--t), box-shadow 100ms, transform 100ms;
    font-family:"Press Start 2P", cursive; font-size:16px; text-transform:uppercase;
  }
  .lock-btn span{ transition:opacity var(--t), transform var(--t); transform-origin:center; }
  .open .lock-btn{ padding:0; min-width:34px; width:34px; }
  .open .lock-btn span{ opacity:0; transform:scaleX(0); pointer-events:none; }
  .lock-btn:active{ transform:translateX(-50%) translateY(3px); box-shadow:0 5px 0 #000; }
  .lock-btn:focus-visible{ outline:3px solid #3cb043; outline-offset:3px; }

  .body{ height:var(--bodyH); background:var(--gold); }

  /* Серая плашка на шве */
  .promo-bar{
    position:absolute; left:0; right:0;
    top:calc(var(--lidH) - (var(--bandH)/2));
    height:var(--bandH); background:#2a2a2a; color:#fff;
    border-top:4px solid #000; border-bottom:4px solid #000;
    display:grid; grid-template-columns:1fr auto; align-items:center; gap:12px;
    padding:12px 14px; transform-origin:center; transform:scaleY(0); transition:transform var(--t); z-index:2;
  }
  .open .promo-bar{ transform:scaleY(1); }

  .key{
    font-size:12px; letter-spacing:1.5px; background:#1c1c1c;
    border:4px solid #000; padding:8px 10px; white-space:nowrap; overflow:auto; color:#fff;
    font-family:"Press Start 2P", cursive;
    overflow: hidden;
  }

  /* Copy button (ваш реф) */
  .box-button{ cursor:pointer; border:4px solid #000; background:gray; padding-bottom:10px; transition:.1s; user-select:none; }
  .button{ background:#ddd; border:4px solid #fff; padding:3px 8px; }
  .button span{ font-size:11px; color:#000; text-transform:uppercase; font-family:"Press Start 2P", cursive; }
  .box-button:active{ padding:0; margin-bottom:10px; transform:translateY(10px); }

  .open .lid{ transform:translateY(-40px); }

  /* responsive */
  @media (max-width:420px){
    :root{ --lidH:68px; --bandH:80px; --bodyH:150px; }
    .chest{ box-shadow:0 0 0 2px #000 inset, 0 10px 0 #000; }
    .lock-btn{ min-width:100px; height:32px; font-size:8px; }
    .key{ font-size:10px; }
    .button span{ font-size:9px; }
    .promo-bar{
      grid-template-columns:1fr;
    }
  }
</style>
</head>
<body>
  <!-- particles -->
  <div class="custom-squares-layer"></div>

  <div class="uc-courses">
    <div class="chest" id="chest">
      <div class="box">
        <div class="lid">
          <button class="lock-btn" id="lockBtn" type="button" aria-expanded="false" aria-controls="promoBar">
            <span>OPEN</span>
          </button>
        </div>

        <div class="promo-bar" id="promoBar" aria-hidden="true">
          <code class="key" id="gameKey">X6YVY-7WWJ3-HWMT4-R4C3T-X2TYZ</code>
          <div class="box-button" id="copyBtn">
            <div class="button"><span>COPY</span></div>
          </div>
        </div>

        <div class="body" aria-hidden="true"></div>
      </div>
    </div>
  </div>

<script>
  // open/close
  const chest=document.getElementById('chest');
  const lockBtn=document.getElementById('lockBtn');
  const bar=document.getElementById('promoBar');
  lockBtn.addEventListener('click',()=>{
    const isOpen=chest.classList.toggle('open');
    lockBtn.setAttribute('aria-expanded', String(isOpen));
    bar.setAttribute('aria-hidden', String(!isOpen));
  });

  // copy (надёжный textarea-фоллбек)
  const copyBtn=document.getElementById('copyBtn');
  const gameKey=document.getElementById('gameKey');
  copyBtn.addEventListener('click',(e)=>{
    e.stopPropagation();
    const text=gameKey.textContent.trim();
    const ta=document.createElement('textarea');
    ta.value=text; ta.setAttribute('readonly','');
    ta.style.position='fixed'; ta.style.top='-1000px';
    document.body.appendChild(ta);
    ta.select();
    let ok=false; try{ ok=document.execCommand('copy'); }catch{}
    document.body.removeChild(ta);
    const span=copyBtn.querySelector('.button span');
    const old=span.textContent; span.textContent= ok?'COPIED!':'ERROR';
    setTimeout(()=>span.textContent=old,1200);
  });

  // particles
  const layer=document.querySelector('.custom-squares-layer');
  for(let i=0;i<25;i++){
    const sq=document.createElement('div');
    sq.className='square';
    sq.style.left=Math.random()*100+'%';
    sq.style.bottom=Math.random()*100+'%';
    const size=2+Math.random()*3;
    sq.style.width=sq.style.height=size+'px';
    sq.style.animationDelay=(Math.random()*4)+'s';
    layer.appendChild(sq);
  }
</script>
</body>
</html>

